(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{158:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(30),i=n.n(r),o=n(22),c=n(17),u=n(10),m=(n(83),n(160)),s=n(161),E=n(37),p=function(){return fetch.apply(void 0,arguments).then((function(e){return e.json()}))};function d(){return Object(E.a)("/api/auth/status",p)}var g=function(){var e=d().data,t=e&&e.email;return l.a.createElement(m.a,null,l.a.createElement(s.a,null,"Welcome,",t?l.a.createElement("p",null,"You are currently logged in as ",l.a.createElement("b",null,t)):l.a.createElement("p",null,"First, please ",l.a.createElement(c.b,{to:"/login"},"login or register")),l.a.createElement("ul",null,l.a.createElement("li",null,"Go to ",l.a.createElement(c.b,{to:"/events"},"Events")," tab to see available events, or create a new one"),l.a.createElement("li",null,"Click on an event to see the event details and register for the event"))))},f=n(162),v=n(69),h=n(164),b=n(163),y=n(47),j=function(){var e=Object(u.f)(),t=Object(y.a)(),n=d(),a=n.data;n.mutate;return a&&a.loggedIn?l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement(f.a,null,l.a.createElement(v.a,null,l.a.createElement("p",null,"You are currently logged in as ",l.a.createElement("b",null,a.email)),l.a.createElement(h.a,{onSubmit:t.handleSubmit((function(){return(console.log("log out"),fetch("/api/auth/logout",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))).then((function(t){return"message"in t?alert(t.message):e.push("/")}))}))},l.a.createElement(b.a,{variant:"danger",type:"submit"},"Logout")))))):l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement(f.a,null,l.a.createElement(v.a,null,l.a.createElement(h.a,{onSubmit:t.handleSubmit((function(t){return function(e){return fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}(t).then((function(n){return"loggedIn"in n&&n.loggedIn?e.push("/"):function(e){return fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}(t).then((function(t){return"loggedIn"in t&&t.loggedIn?e.push("/"):"message"in t?alert(t.message):void 0}))}))}))},l.a.createElement(h.a.Group,{controlId:"formBasicEmail"},l.a.createElement(h.a.Label,null,"Email"),l.a.createElement(h.a.Control,{ref:t.register,name:"email",type:"email",placeholder:"Enter email"})),l.a.createElement(h.a.Group,{controlId:"formBasicPassword"},l.a.createElement(h.a.Label,null,"Password"),l.a.createElement(h.a.Control,{ref:t.register,name:"password",type:"password",placeholder:"Password"})),l.a.createElement(b.a,{variant:"primary",type:"submit",value:"login"},"Login / Register"))))))};var T=n(23),O=n(15);function S(){var e=Object(o.a)(["\n  border: solid 1px #ccc;\n  padding: 1em;\n"]);return S=function(){return e},e}function x(){var e=Object(o.a)(["\n    list-style: none;\n    margin: 10px 0;\n\n    a {\n        display: block;\n        padding: 10px 10px;\n        color:#212529;\n        text-style: none;\n        text-decoration: none;\n        \n        :hover {\n            background-color: #eee;\n        }\n    }\n    \n    p {\n        margin: 0;\n        font-style: italic;\n    }\n    \n    label {\n        margin: 0;\n        display: inline-block;\n        width: 70px;\n        font-style: normal;\n    }\n"]);return x=function(){return e},e}function C(){var e=Object(o.a)(["\n    ul {\n        padding: 0;\n    }\n"]);return C=function(){return e},e}var w=T.a.div(C()),D=T.a.li(x()),I=T.a.div(S()),L=function(){var e=Object(y.a)(),t=Object(E.a)("/api/events",p),n=t.data,a=t.mutate,r=d().data;return n?l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement(f.a,null,l.a.createElement(v.a,null,l.a.createElement(w,null,l.a.createElement("h2",null,"Events (",n.totalCount,")"),l.a.createElement("ul",null,n.values.map((function(e){return l.a.createElement(D,{key:e.id},l.a.createElement(c.b,{to:"/event/"+e.id},l.a.createElement("h3",null,e.name),l.a.createElement("p",null,l.a.createElement("label",null,"Start:")," ",new Date(e.startTimestamp).toISOString()),l.a.createElement("p",null,l.a.createElement("label",null,"End:")," ",new Date(e.endTimestamp).toISOString()),l.a.createElement("p",null,l.a.createElement("label",null,"Location:")," ",e.location)))}))))),l.a.createElement(v.a,{xs:4},l.a.createElement(I,null,function(e,t,n){if(!t||!t.loggedIn)return l.a.createElement("p",null,"Please log in to create an event.");return l.a.createElement("div",null,l.a.createElement("h3",null,"Create Event"),l.a.createElement(h.a,{onSubmit:e.handleSubmit((function(t){var a=t.name,l=t.location,r=t.description,i=t.startDatetime,o=t.endDatetime,c=Object(O.parseDate)(i);if(!c)return alert("Invalid input start date");var u=Object(O.parseDate)(o);return u?function(e){return fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}({name:a,description:r,location:l,startTimestamp:c.getTime(),endTimestamp:u.getTime()}).then((function(t){if("message"in t)return alert(t.message);e.reset(),n()})):alert("Invalid input end date")}))},l.a.createElement(h.a.Group,null,l.a.createElement(h.a.Label,null,"Name"),l.a.createElement(h.a.Control,{ref:e.register,name:"name",type:"text"})),l.a.createElement(h.a.Group,null,l.a.createElement(h.a.Label,null,"Location"),l.a.createElement(h.a.Control,{ref:e.register,name:"location",type:"text"})),l.a.createElement(h.a.Group,null,l.a.createElement(h.a.Label,null,"Description"),l.a.createElement(h.a.Control,{ref:e.register,name:"description",type:"textarea"})),l.a.createElement(h.a.Group,null,l.a.createElement(h.a.Label,null,"Start Date/Time"),l.a.createElement(h.a.Control,{ref:e.register,name:"startDatetime",type:"text",placeholder:"e.g. Today, Tomorrow, next Friday"})),l.a.createElement(h.a.Group,null,l.a.createElement(h.a.Label,null,"End Date/Time"),l.a.createElement(h.a.Control,{ref:e.register,name:"endDatetime",type:"text",placeholder:"e.g. Today, Tomorrow, next Friday"})),l.a.createElement(b.a,{variant:"primary",type:"submit"},"Create")))}(e,r,(function(){return a()}))))))):null};var k=n(165),G=n(166);function N(){var e=Object(o.a)(["\n    margin: 30px 0;\n    \n"]);return N=function(){return e},e}function P(){var e=Object(o.a)(["\n    margin: 10px 0;\n    label {\n        margin: 0;\n        margin-right: 5px;\n        display: inline-block;\n        width: 80px;\n        text-align: right;\n    }\n"]);return P=function(){return e},e}var J=T.a.p(P()),F=T.a.p(N()),B=function(){var e,t=Object(u.g)().id,n=d().data,a=(e=t,Object(E.a)("/api/event/".concat(e),p)).data,r=function(e){return Object(E.a)("/api/event/".concat(e,"/registrations"),p)}(t),i=r.data,o=r.mutate;if(!a)return l.a.createElement("div",null,"Fail loading event...");var c=new Date(a.startTimestamp),s=new Date(a.endTimestamp),g=n&&n.loggedIn,h=n&&i&&i.find((function(e){return e.email==n.email}));return l.a.createElement(m.a,null,l.a.createElement(f.a,null,l.a.createElement(v.a,null,l.a.createElement("h1",null,a.name),l.a.createElement(J,null,l.a.createElement("label",null,"Location:"),a.location),l.a.createElement(J,null,l.a.createElement("label",null,"Start:"),l.a.createElement("span",null,c.toDateString()),l.a.createElement("span",null,c.toTimeString())),l.a.createElement(J,null,l.a.createElement("label",null,"End:"),l.a.createElement("span",null,s.toDateString()),l.a.createElement("span",null,s.toTimeString())),l.a.createElement(F,null,a.description),l.a.createElement("h4",null,"Attendances (",null===i||void 0===i?void 0:i.length,")"),l.a.createElement("ul",null,null===i||void 0===i?void 0:i.map((function(e){return l.a.createElement("li",{key:e.email},e.email)}))),!g&&l.a.createElement("p",null,"Please log in to register."),g&&!h&&l.a.createElement(b.a,{variant:"primary",onClick:function(){return function(e){return fetch("/api/event/".concat(e,"/registrations"),{method:"PUT",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}(t).then((function(){return o()}))}},"Join"),g&&h&&l.a.createElement(b.a,{variant:"danger",onClick:function(){return function(e){return fetch("/api/event/".concat(e,"/registrations"),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}(t).then((function(){return o()}))}},"Cancel Registration"))))};function A(){var e=Object(o.a)(["\n  padding: 4em 0em;\n"]);return A=function(){return e},e}var R=T.a.div(A());var Y=function(){var e=d().data;return l.a.createElement("div",{className:"App"},l.a.createElement(c.a,null,l.a.createElement(k.a,{bg:"light",variant:"light"},l.a.createElement(G.a,{className:"mr-auto"},l.a.createElement(c.b,{className:"nav-link",to:"/"},"Home"),l.a.createElement(c.b,{className:"nav-link",to:"/events"},"Events")),l.a.createElement(G.a,null,l.a.createElement(c.b,{className:"nav-link",to:"/login"},e&&e.loggedIn?"Logout":"Login"))),l.a.createElement(R,null,l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/login"},l.a.createElement(j,null)),l.a.createElement(u.a,{path:"/event/:id"},l.a.createElement(B,null)),l.a.createElement(u.a,{path:"/events"},l.a.createElement(L,null)),l.a.createElement(u.a,{path:"/"},l.a.createElement(g,null))))))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Y,null)),document.getElementById("root"))},78:function(e,t,n){e.exports=n(158)},83:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.3c9aa5cc.chunk.js.map